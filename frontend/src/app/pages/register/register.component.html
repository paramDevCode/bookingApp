<app-header title="Register"></app-header>

<form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="min-h-screen flex items-center justify-center bg-gray-50 p-4">
  <div class="w-full max-w-md bg-white rounded-lg shadow p-6">
    <h2 class="text-2xl font-bold text-center mb-6">Create Account</h2>

    <!-- Name -->
    <div class="mb-4">
      <label class="block text-sm font-medium mb-1" for="name">Full Name</label>
      <input id="name" type="text" formControlName="name" placeholder="John Doe"
             class="w-full px-3 py-2 border rounded focus:outline-none focus:ring" />
      <p *ngIf="f.name.touched && f.name.errors?.['required']" class="text-red-500 text-xs mt-1">
        Name is required.
      </p>
    </div>

    <!-- Email -->
    <div class="mb-4">
      <label class="block text-sm font-medium mb-1" for="email">Email Address</label>
      <input id="email" type="email" formControlName="email" placeholder="Enter your email"
             class="w-full px-3 py-2 border rounded focus:outline-none focus:ring" />
      <p *ngIf="f.email.touched && f.email.errors?.['required']" class="text-red-500 text-xs mt-1">
        Email is required.
      </p>
      <p *ngIf="f.email.touched && f.email.errors?.['email']" class="text-red-500 text-xs mt-1">
        Enter a valid email address.
      </p>
      <small class="text-sm text-gray-500">
        In case you forget your password, we’ll send a reset code to this email.
      </small>
    </div>

    <!-- Phone Number -->
<div class="mb-4">
  <label class="block text-sm font-medium mb-1" for="phoneNumber">Phone Number</label>
  <div class="flex items-center border rounded px-3 py-2 focus-within:ring focus-within:ring-blue-500"
       [ngClass]="{ 'border-red-500': f.phoneNumber.touched && f.phoneNumber.invalid }">
    <span class="text-gray-500 select-none">+91</span>
    <input id="phoneNumber"
           type="tel"
           formControlName="phoneNumber"
           maxlength="10"
           pattern="[0-9]*"
           inputmode="numeric"
           placeholder="Enter 10-digit number"
           class="ml-2 flex-1 outline-none" />
  </div>
  <p *ngIf="f.phoneNumber.touched && f.phoneNumber.errors?.['required']" class="text-red-500 text-xs mt-1">
    Phone number is required.
  </p>
  <p *ngIf="f.phoneNumber.touched && f.phoneNumber.errors?.['pattern']" class="text-red-500 text-xs mt-1">
    Enter a valid 10-digit phone number.
  </p>
</div>


    <!-- Password -->
    <div class="mb-4">
      <label class="block text-sm font-medium mb-1" for="password">Password</label>
      <input id="password" type="password" formControlName="password" placeholder="••••••••"
             class="w-full px-3 py-2 border rounded focus:outline-none focus:ring" />
      <p *ngIf="f.password.touched && f.password.errors?.['required']" class="text-red-500 text-xs mt-1">
        Password is required.
      </p>
      <p *ngIf="f.password.touched && f.password.errors?.['minlength']" class="text-red-500 text-xs mt-1">
        Password must be at least 6 characters.
      </p>
    </div>

    <!-- Confirm Password -->
    <div class="mb-6">
      <label class="block text-sm font-medium mb-1" for="confirmPassword">Confirm Password</label>
      <input id="confirmPassword" type="password" formControlName="confirmPassword" placeholder="••••••••"
             class="w-full px-3 py-2 border rounded focus:outline-none focus:ring" />
      <p *ngIf="f.confirmPassword.touched && f.confirmPassword.errors?.['required']" class="text-red-500 text-xs mt-1">
        Confirm password is required.
      </p>
      <p *ngIf="registerForm.errors?.['passwordMismatch']" class="text-red-500 text-xs mt-1">
        Passwords do not match.
      </p>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full">
      Register
    </button>

    <!-- Link to Login -->
    <p class="text-center text-sm text-gray-500 mt-4">
      Already have an account?
      <a (click)="onLoginRedirect()" class="text-blue-600 hover:underline cursor-pointer">Login</a>
    </p>
  </div>
</form>
